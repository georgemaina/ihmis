/*
 * File: app.js
 *
 * This file was generated by Sencha Architect version 4.3.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 7.6.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 7.6.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

// @require @packageOverrides
Ext.Loader.setConfig({

});


Ext.application({
    models: [
        'Procedures',
        'BillNumbers',
        'EncounterNumbers',
        'PriceTypes',
        'Departments',
        'CashPintsModel',
        'CashSale',
        'WaitingList',
        'DiagnosisCodes',
        'UserGroups',
        'PendingPrescription',
        'OrderStoc',
        'ServiceOrdesrModel',
        'OrderDetails',
        'ReturnOrdersModel',
        'SubCategories',
        'Users',
        'ItemStatus',
        'UsersList',
        'UserRoles',
        'OrderStocksModel',
        'Receipts',
        'Shifts',
        'Suppliers',
        'PurchOrdersModel',
        'PurchOrderItems',
        'LabTests',
        'PatientStatus',
        'FullHaemogramParams',
        'OpMobidityModel',
        'NextOfKin',
        'StatusLogs',
        'NotesTypes',
        'ServicesList',
        'ProceduresAndServices',
        'CashSales',
        'PendingPatientsBills',
        'PendingBills',
        'Allergies',
        'Kins',
        'CashPoints',
        'Ledgers',
        'GeneralLedger',
        'DebtorsList',
        'Payments',
        'PaymentsList',
        'CustomerType',
        'DebtorJobs',
        'CustomerList',
        'DebtorBalances',
        'MembersList',
        'ReceiptsAllocation',
        'Allocations',
        'Invoices',
        'DebtorDetails',
        'CustomerInfo',
        'DebtorTransactions',
        'ReceiptsAllocate',
        'OpVisitsModel',
        'XrayRevenue',
        'TreatmentRegister',
        'Clinics',
        'RevenuesModel',
        'XrayActivities',
        'HTCReason',
        'TotalDefaulters',
        'NhifClaims',
        'DiagnosisReport',
        'TopDiseases',
        'CreditSlips',
        'ReceiptsSummary',
        'Admissions',
        'OpRooms',
        'AssignedRooms',
        'DebtorCategory',
        'VitalsChart',
        'Workload',
        'MenuItems',
        'MenuGroups',
        'Appointments',
        'CompanyDetails',
        'CashpointsSummary',
        'CashSaleSummaries',
        'DepartmentRevenue',
        'PatientsSummary',
        'ItemSalesSummary',
        'IpMobidityModel',
        'cataloglist',
        'CalendarModel',
        'EventsModel',
        'TheatreList',
        'StaffList',
        'ProcedureNames',
        'ProcedureClass',
        'ClassCodes',
        'TheatreRooms',
        'ProcedureStatus',
        'AnesthesiaCharts',
        'AnesthesiaFluids',
        'AnesthesiaMonitors',
        'AnesthesiaVitals',
        'SurgicalCheckList',
        'ChartmasterModel',
        'AccountGroupsModel',
        'AccountSectionModel',
        'DrugsIssued'
    ],
    stores: [
        'ProcedureStore',
        'MenusStore',
        'ReceiptStore',
        'Wards',
        'Consultations',
        'DepartmentsStore',
        'CashSaleStore',
        'WaitingListStore',
        'DiseaseCodeStore',
        'UserGroupStore',
        'PendingPrescription',
        'PrescriptionItemStore',
        'StockLevelsStore',
        'ReturnOrdersStore',
        'SubCategoryStore',
        'ItemLocationStore',
        'UsersStore',
        'UnitsMeasureStore',
        'ItemStatusStore',
        'UsersListStore',
        'UserRolesStore',
        'ItemsListStore',
        'OrderDetailStore',
        'InventoryItemStore',
        'CategoryStore',
        'PricesStore',
        'StoreLocationsStore',
        'StoreUsers',
        'PatientDetailStore',
        'OrderStocksStore',
        'ShiftsStore',
        'SuppliersStore',
        'PurchOrdersStore',
        'PurchOrderItems',
        'LabTestStore',
        'PatientsListStore',
        'StaffList',
        'LaboratoryParams',
        'LabParamsStore',
        'LabParamsGroups',
        'PatientStatusStore',
        'FullHaemogramStore',
        'NextOfKin',
        'StatusLogsStore',
        'NoteTypesStore',
        'ServicesStore',
        'ProceduresAndServices',
        'CashSalesStore',
        'OrdersServiceStore',
        'PendingPatientBills',
        'BillStore',
        'PendingBills',
        'AllergiesStore',
        'CashPointsStore',
        'LedgersStore',
        'PaidReceiptsStore',
        'DebtorsList',
        'GeneralLedgerStore',
        'RadiologyListStore',
        'PaymentsListStore',
        'DebtorLocationStore',
        'CustomerTrans',
        'KinsStore',
        'ReceiptsList',
        'Allocations',
        'InvoicesList',
        'ReceiptAllocations',
        'InvoiceAllocations',
        'DebtorDetailsStore',
        'CustomerInfo',
        'DebtorTransactions',
        'ReceiptsAllocateSt',
        'InvoiceAllocateSt',
        'OpMobidityStore',
        'ClinicsStore1',
        'AdmDisStore1',
        'XrayRevenueStore',
        'htcReasonStore',
        'NhifClaimStore',
        'DiagnosisReportStore',
        'DiseasesStore',
        'TopDiseasesStore',
        'CreditSlipsStore',
        'ReceiptsSummaryStore',
        'AdmissionsStore',
        'OpRoomsStore',
        'AssignedRoomsStore',
        'PaymentPlanStore',
        'OpInvoicesStore',
        'DebtorCatStore',
        'VitalsChartStore',
        'DoctorsWorkloadStore',
        'MenuItemsStore',
        'MenuGroupStore',
        'AppointmentsStore',
        'CompanyDetails',
        'NhifRatesStore',
        'CashpointsSummaryStore',
        'CashSaleSummariesStore',
        'DeptRevenueStore',
        'PatientsSummaryStore',
        'ItemSalesSummaryStore',
        'DischargesStore',
        'ReceiptStore1',
        'LabtestsStore',
        'LocationsStore',
        'DrugsList',
        'CatalogListStore',
        'CalendarStore',
        'TheatreProcedures',
        'DentalServices',
        'EyeServices',
        'TheatreListStore',
        'StaffStore',
        'ProcedureNamesStore',
        'ProcedureClassStore',
        'ClassCodes',
        'TheatreRoomsStore',
        'ProcedureStatusStore',
        'AnesthesiaChartAgents',
        'AnesthesiaChartFluids',
        'AnesthesiaChartMonitors',
        'AnesthesiaVitals',
        'SurgicalCheckListStore',
        'ChartMasterStore',
        'AccountGroupsStore',
        'AccountSectionStore',
        'DrugsIssuedStore'
    ],
    views: [
        'Discharge',
        'Register',
        'PatientInfo',
        'ViewSlips',
        'BedCharge',
        'ReprintReceipt',
        'CashPointsList',
        'Diagnosis',
        'Radiology',
        'NewPrescriptions',
        'Login',
        'PendingBills',
        'CashSales',
        'IssueDrugs',
        'Prescriptions',
        'StockLevels',
        'ItemsMaster',
        'ItemRegister',
        'PriceTypesCat',
        'PrescriptionForm',
        'Dosage',
        'PendingPrescriptions',
        'ShiftReport',
        'MyPagingToolbar8',
        'EndShift',
        'StartShift',
        'Home',
        'Shifts',
        'OrdersFromSuppliers',
        'Suppliers',
        'SupplierForm',
        'PurchaseOrders',
        'PurchaseOrderDetails',
        'WorkFlows',
        'UsersForm',
        'Urinalysis',
        'StoolOCParasite',
        'SpecimenCollection',
        'SpecimenReceived',
        'ResultsForm',
        'ReportsForm',
        'RenalProfile',
        'PendingResults',
        'LabResults',
        'ParamsForm',
        'NewStaff',
        'MainView',
        'LipidProfile',
        'LFTS',
        'LabResultsGrid',
        'LaboratoryParams',
        'FullHaemogram',
        'EditResults',
        'CSF',
        'ApproveResults',
        'AncProfile',
        'AllLabTests',
        'LabItems',
        'PatientDetais',
        'LabTests',
        'PatientDetailsLab',
        'OpVisits',
        'OpMobidity',
        'Services',
        'CashSalesAdj',
        'SalesGrid',
        'ProcessOrder',
        'WardOccupancy',
        'Bills',
        'NhifCreditForm',
        'InvoicesList',
        'InvoicePanel',
        'Debit',
        'Credit',
        'InsuranceCredit',
        'MCH',
        'NewUserForm',
        'Immunization',
        'Debtors',
        'GeneralLedger',
        'InpatientNotes',
        'PatientTransfer',
        'IpTransfer',
        'IpNotes',
        'PaymentsList',
        'DebtorRegisterForm',
        'CustomerInfo',
        'CustomerList',
        'DebtorsManager',
        'DebtorsList',
        'DebtorMembers',
        'ReceiptsList',
        'DebtorAllocations',
        'DebtorAllocateReceipts',
        'DebtorInvoicesList',
        'DebtorReceiptsList',
        'NewMembersForm',
        'RemoveMembersForm',
        'Reports',
        'OutpatientReports',
        'DentalServices',
        'HtnTreatmentRegister',
        'Hts',
        'DoctorsRoom',
        'InpatientReports',
        'PharmacyReports',
        'LaboratoryReports',
        'OtherReports',
        'DiagnosisReport',
        'TopDiseases',
        'Admissions',
        'VitalsLists',
        'AssignOpRoom',
        'OpWaitingList',
        'OutpatientInvoices',
        'DosageList',
        'ServicesProcedures',
        'PatientChart',
        'StatisticsPanel',
        'DoctorsWorkload',
        'MenusForm',
        'Appointments',
        'AppointmentsList',
        'LabRequestItems',
        'AppointmentsForm',
        'AccountsPanel',
        'Theatre',
        'CashbookReports',
        'UsersList',
        'CashPointsSummary',
        'CollectionsBreakdown',
        'DepartmentsRevenue',
        'PatientsSummary',
        'ShiftsReportHeader',
        'ItemSalesSummary',
        'Discharges',
        'NhifCredits',
        'IpMobidity',
        'Occupancy',
        'CashbookReportsHeader',
        'DailyRevenueBreakdown',
        'DrugsList',
        'UpdateDates',
        'NotesList',
        'WardsList',
        'ClinicsList',
        'OutpatientVisits',
        'CatalogList',
        'ExportButton',
        'MyCalendar',
        'CreateProcedures',
        'CreateEyeService',
        'CreateDentalService',
        'TheatreListGrid',
        'BookingForm',
        'AnaesthesiaRecordGrid',
        'AnaesthesiaRecord',
        'CheckList',
        'CheckListGrid',
        'ChartmasterGrid',
        'GlAccountForm',
        'AccountGroups',
        'AccountSection',
        'ReceiptsAdj',
        'DrugsIssued'
    ],
    controllers: [
        'Main',
        'Inpatient',
        'CashBook',
        'Pharmacy',
        'ProductsCatalog',
        'UserManagement',
        'Laboratory',
        'Reports',
        'DebtorsMain'
    ],
    name: 'CarePortal',

    launch: function() {
        Ext.Ajax.request({
            url: 'data/getDataFunctions.php?task=checkUserSession',
            success: function(response, opts) {
                var obj = Ext.decode(response.responseText);
                console.log("Signed User is "+obj.userNameSession);
               // Ext.Msg.alert("Remove","User removed successfully"+obj);
                if(obj.userNameSession!==""){
                    Ext.create("CarePortal.view.Portal",{});
                }else{
                     Ext.create("CarePortal.view.Login",{});
                }

                this.setCompanyDetails();
            },

            failure: function(response, opts) {
                console.log('server-side failure with status code ' + response.status);
            },
            scope:this
        });


        // var logStat=localStorage.getItem("LoggedIn");
        // if(logStat==="true"){
        //     console.log('Login Status','Already Logged in');
        //     //this.getLogin().destroy();



        //                  //this.getView().destroy();

        //     //Ext.widget(homeArea);
        //    // centerContainer=homeArea.down("#PortalDetails");
        //     //centerContainer.removeAll();
        // }else{

        // }
    },

    setCompanyDetails: function() {
        Ext.Ajax.request({
                    url: 'data/getDataFunctions.php?task=getCompanyDetails',
                    success: function(response, opts) {
                        var obj = Ext.JSON.decode(response.responseText);
                        localStorage.setItem("CompanyName",obj[0].CompanyName);
                        localStorage.setItem("PhysicalAddress",obj[0].PhysicalAddress);
                        localStorage.setItem("Address",obj[0].Address);
                        localStorage.setItem("Town",obj[0].Town);
                        localStorage.setItem("County",obj[0].County);
                        localStorage.setItem("Postal",obj[0].Postal);
                        localStorage.setItem("Phone",obj[0].Tel);
                        localStorage.setItem("Mobile",obj[0].Mobile);
                        localStorage.setItem("Email",obj[0].Email);
                        localStorage.setItem("Website",obj[0].Website);
                        localStorage.setItem("logoPath",obj[0].logoPath);
                        localStorage.setItem("mflCode",obj[0].mflCode);
                        localStorage.setItem("pinNo",obj[0].pinNo);
                        localStorage.setItem("vatNo",obj[0].vatNo);

                    },

                    failure: function(response, opts) {
                        console.log('server-side failure with status code ' + response.status);
                    },
                    scope:this
                });
    }

});
